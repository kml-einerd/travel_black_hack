<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spending Tracker - MilesAI</title>
  <link rel="stylesheet" href="../css/design-system.css">
  <link rel="stylesheet" href="../css/components.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      padding: var(--space-8);
      background: var(--color-bg-canvas);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: var(--space-12);
    }

    .header__title {
      font-size: var(--text-5xl);
      font-weight: var(--font-black);
      color: var(--color-text-primary);
      margin-bottom: var(--space-3);
      letter-spacing: var(--tracking-tight);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
    }

    .header__subtitle {
      color: var(--color-text-secondary);
      font-size: var(--text-lg);
    }

    .input-card {
      background: white;
      padding: var(--space-8);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-card);
      margin-bottom: var(--space-8);
    }

    .input-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: var(--space-4);
      align-items: end;
      margin-bottom: var(--space-4);
    }

    input, select {
      width: 100%;
      padding: var(--space-3);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      font-family: var(--font-mono);
      font-variant-numeric: tabular-nums;
    }

    label {
      display: block;
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-2);
      color: var(--color-text-primary);
      text-transform: uppercase;
      letter-spacing: var(--tracking-wide);
    }

    .transactions {
      background: white;
      padding: var(--space-8);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-card);
    }

    .transactions h3 {
      font-size: var(--text-xl);
      font-weight: var(--font-bold);
      margin-bottom: var(--space-4);
      color: var(--color-text-primary);
    }

    .transaction {
      padding: var(--space-4);
      border-bottom: 1px solid var(--color-divider);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .transaction:last-child {
      border-bottom: none;
    }

    .transaction__amount {
      font-family: var(--font-mono);
      font-weight: var(--font-bold);
      font-variant-numeric: tabular-nums;
      color: var(--color-primary);
    }

    .summary {
      background: var(--color-primary);
      color: white;
      padding: var(--space-8);
      border-radius: var(--radius-xl);
      margin-top: var(--space-8);
      text-align: center;
      position: relative;
      box-shadow: var(--shadow-elevated);
    }

    .summary::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--color-accent);
    }

    .summary__label {
      font-size: var(--text-sm);
      opacity: 0.85;
      margin-bottom: var(--space-2);
      font-weight: var(--font-semibold);
      text-transform: uppercase;
      letter-spacing: var(--tracking-wide);
    }

    .summary__total {
      font-family: var(--font-mono);
      font-size: var(--text-6xl);
      font-weight: var(--font-black);
      font-variant-numeric: tabular-nums;
      color: var(--color-accent);
      line-height: 1;
    }

    .summary__remaining {
      margin-top: var(--space-4);
      font-size: var(--text-xl);
      padding-top: var(--space-4);
      border-top: 1px solid rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-2);
    }

    @media (max-width: 768px) {
      .input-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="header__title">
        <i data-lucide="bar-chart-2" class="icon icon--xl"></i>
        <span>Spending Tracker</span>
      </h1>
      <p class="header__subtitle">Track purchases toward minimum spend requirements</p>
    </div>

    <div class="input-card">
      <div class="input-grid">
        <div>
          <label for="desc">Description</label>
          <input type="text" id="desc" placeholder="Grocery store">
        </div>
        <div>
          <label for="amount">Amount ($)</label>
          <input type="number" id="amount" placeholder="100.00" step="0.01" min="0">
        </div>
        <button onclick="addTransaction()" class="btn btn-accent">
          <i data-lucide="plus" class="icon icon--sm"></i>
          <span>Add Transaction</span>
        </button>
      </div>
      <div>
        <label for="goal">Minimum Spend Goal ($)</label>
        <input type="number" id="goal" value="3000" placeholder="3000" step="100" min="0">
      </div>
    </div>

    <div class="transactions">
      <h3>Recent Transactions</h3>
      <div id="list"></div>
    </div>

    <div class="summary">
      <div class="summary__label">Total Spent</div>
      <div id="total" class="summary__total">$0</div>
      <div id="remaining" class="summary__remaining"></div>
    </div>
  </div>

  <script>
    lucide.createIcons();

    let transactions = [];

    function addTransaction() {
      const desc = document.getElementById('desc').value;
      const amount = parseFloat(document.getElementById('amount').value);
      if (!desc || !amount) return alert('Please fill all fields');

      transactions.push({desc, amount});
      document.getElementById('desc').value = '';
      document.getElementById('amount').value = '';
      render();
    }

    function render() {
      const goal = parseFloat(document.getElementById('goal').value) || 3000;
      const total = transactions.reduce((sum, t) => sum + t.amount, 0);
      const remaining = Math.max(0, goal - total);
      const goalReached = remaining === 0;

      document.getElementById('list').innerHTML = transactions.length > 0
        ? transactions.map((t, i) => `
          <div class="transaction">
            <div>${t.desc}</div>
            <div class="transaction__amount">$${t.amount.toFixed(2)}</div>
          </div>
        `).join('')
        : '<p style="color: var(--color-text-muted); text-align: center; padding: var(--space-8);">No transactions yet</p>';

      document.getElementById('total').textContent = '$' + total.toFixed(2);

      document.getElementById('remaining').innerHTML = remaining > 0
        ? `<span>$${remaining.toFixed(2)} remaining to meet goal</span>`
        : `
          <i data-lucide="check-circle" class="icon icon--sm"></i>
          <span>Goal reached!</span>
        `;

      lucide.createIcons();
    }

    render();
  </script>
</body>
</html>
