<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Pulse Weekly - MilesAI</title>
    <link rel="stylesheet" href="../css/design-system.css">
    <link rel="stylesheet" href="../css/components.css">
    <style>
        .newsletter-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .pulse-header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: var(--space-8);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-8);
            text-align: center;
        }
        .pulse-header h1 { color: white; margin-bottom: var(--space-2); }
        .index-row {
            display: flex;
            justify-content: space-between;
            padding: var(--space-3) 0;
            border-bottom: 1px solid var(--color-divider);
        }
        .trend-up { color: var(--color-success); }
        .trend-down { color: var(--color-danger); }
        .trend-stable { color: var(--color-text-muted); }
    </style>
</head>
<body>

    <nav class="container header-nav">
        <div class="header-nav__logo">MilesAI <span class="text-sm text-primary">Intelligence</span></div>
    </nav>

    <main class="container newsletter-container">

        <div class="pulse-header">
            <span class="badge badge--info" style="margin-bottom: var(--space-4)">WEEKLY INTELLIGENCE</span>
            <h1>ğŸ“Š Market Pulse #47</h1>
            <p class="text-lg" style="opacity: 0.8">Week of January 13-19, 2026</p>
        </div>

        <section class="card" style="margin-bottom: var(--space-8)">
            <h2 class="text-xl">Points Economy Index</h2>
            <p class="text-sm text-muted">Overall Market: <span class="trend-up">ğŸ“ˆ +2.3%</span> vs last week</p>

            <div style="margin-top: var(--space-4)">
                <div class="index-row" style="font-weight: 600; color: var(--color-text-muted); font-size: var(--text-xs); text-transform: uppercase;">
                    <span>Program</span>
                    <span>Value</span>
                    <span>Trend</span>
                </div>
                <div id="index-rows"></div>
            </div>
        </section>

        <div class="grid-cards" style="grid-template-columns: 1fr 1fr; margin-bottom: var(--space-8)">
            <section class="card">
                <h2 class="text-xl">ğŸ† Best Routes</h2>
                <div id="best-routes"></div>
            </section>

            <section class="card">
                <h2 class="text-xl">ğŸ’³ Card Spotlight</h2>
                <div id="card-spotlight"></div>
            </section>
        </div>

    </main>

    <script>
        const marketData = {
            "points_economy_index": {
                "programs": [
                    {"name": "Chase UR", "value": 1.92, "change": "+0.05", "trend": "up"},
                    {"name": "Amex MR", "value": 1.78, "change": "+0.12", "trend": "up"},
                    {"name": "United Miles", "value": 1.34, "change": "0", "trend": "stable"},
                    {"name": "Hyatt Points", "value": 2.21, "change": "-0.08", "trend": "down"}
                ]
            },
            "best_routes": [
                {
                    "route": "JFK â†’ NRT",
                    "airline": "ANA",
                    "points": 85000,
                    "cpp": 3.2
                },
                {
                    "route": "LAX â†’ LHR",
                    "airline": "Virgin",
                    "points": 47500,
                    "cpp": 4.1
                }
            ],
            "card_spotlight": {
                "card": "Citi Strata Premier",
                "verdict": "Best everyday travel card of 2026",
                "image": "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400"
            }
        };

        // Render Index
        const indexContainer = document.getElementById('index-rows');
        indexContainer.innerHTML = marketData.points_economy_index.programs.map(p => {
            const trendClass = p.trend === 'up' ? 'trend-up' : p.trend === 'down' ? 'trend-down' : 'trend-stable';
            const icon = p.trend === 'up' ? 'ğŸ“ˆ' : p.trend === 'down' ? 'ğŸ“‰' : 'â¡ï¸';
            return `
                <div class="index-row">
                    <span>${p.name}</span>
                    <span style="font-family: var(--font-family-mono)">${p.value}Â¢</span>
                    <span class="${trendClass}">${icon} ${p.change}</span>
                </div>
            `;
        }).join('');

        // Render Routes
        document.getElementById('best-routes').innerHTML = marketData.best_routes.map(r => `
            <div style="margin-bottom: var(--space-4); padding-bottom: var(--space-4); border-bottom: 1px solid var(--color-divider);">
                <div style="font-weight: 700;">${r.route}</div>
                <div class="text-sm text-muted">${r.airline} â€¢ ${r.points.toLocaleString()} pts</div>
                <div class="badge badge--success" style="margin-top: 5px">Value: ${r.cpp}Â¢</div>
            </div>
        `).join('');

        // Render Card Spotlight
        const card = marketData.card_spotlight;
        document.getElementById('card-spotlight').innerHTML = `
            <img src="${card.image}" style="width: 100%; height: 150px; object-fit: cover; border-radius: var(--radius-lg); margin-bottom: var(--space-4);">
            <h3 class="text-lg">${card.card}</h3>
            <p class="text-sm text-primary" style="font-weight: 600;">"${card.verdict}"</p>
            <button class="btn btn-secondary btn-sm" style="width: 100%">Read Review</button>
        `;

    </script>
</body>
</html>
